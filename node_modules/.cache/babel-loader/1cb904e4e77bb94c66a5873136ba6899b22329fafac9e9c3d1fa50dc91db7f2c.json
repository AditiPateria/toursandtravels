{"ast":null,"code":"import _objectSpread from\"C:/Users/Aditi/Desktop/travel-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../../context/AuthContext';import{getTours,submitFeedback}from'../../services/tourService';import{Container,Form,Button,Alert,Card,Row,Col,Spinner}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Feedback=()=>{const{user}=useAuth();const[tours,setTours]=useState([]);const[selectedTour,setSelectedTour]=useState('');const[feedback,setFeedback]=useState({rating:5,comment:''});const[submitted,setSubmitted]=useState(false);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchTours=async()=>{try{const data=await getTours();setTours(data);}catch(err){setError('Failed to fetch tours. Please try again later.');console.error(err);}finally{setLoading(false);}};fetchTours();},[]);const handleSubmit=async e=>{e.preventDefault();setError('');if(!selectedTour){setError('Please select a tour');return;}try{await submitFeedback(_objectSpread({userId:user.id,tourId:selectedTour},feedback));setSubmitted(true);}catch(err){setError('Failed to submit feedback. Please try again.');console.error(err);}};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",style:{color:'#3498db'},children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(submitted){return/*#__PURE__*/_jsxs(Container,{className:\"my-5 text-center\",children:[/*#__PURE__*/_jsxs(Alert,{variant:\"success\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Thank you for your feedback!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We appreciate your time and valuable input.\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",href:\"/\",children:\"Back to Home\"})]});}return/*#__PURE__*/_jsxs(Container,{className:\"my-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4 text-center\",style:{color:'#3498db'},children:\"Share Your Feedback\"}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Select Tour\"}),/*#__PURE__*/_jsxs(Form.Select,{value:selectedTour,onChange:e=>setSelectedTour(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose a tour...\"}),tours.map(tour=>/*#__PURE__*/_jsx(\"option\",{value:tour.id,children:tour.title},tour.id))]})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsx(\"div\",{children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"span\",{style:{cursor:'pointer',color:star<=feedback.rating?'#e74c3c':'#ccc',fontSize:'2rem'},onClick:()=>setFeedback(_objectSpread(_objectSpread({},feedback),{},{rating:star})),children:\"\\u2605\"},star))})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Comments\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:4,value:feedback.comment,onChange:e=>setFeedback(_objectSpread(_objectSpread({},feedback),{},{comment:e.target.value}))})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Submit Feedback\"})]})]})})})})]});};export default Feedback;","map":{"version":3,"names":["React","useState","useEffect","useAuth","getTours","submitFeedback","Container","Form","Button","Alert","Card","Row","Col","Spinner","jsx","_jsx","jsxs","_jsxs","Feedback","user","tours","setTours","selectedTour","setSelectedTour","feedback","setFeedback","rating","comment","submitted","setSubmitted","loading","setLoading","error","setError","fetchTours","data","err","console","handleSubmit","e","preventDefault","_objectSpread","userId","id","tourId","className","children","animation","role","style","color","variant","href","md","Body","onSubmit","Group","Label","Select","value","onChange","target","required","map","tour","title","star","cursor","fontSize","onClick","Control","as","rows","type"],"sources":["C:/Users/Aditi/Desktop/travel-frontend/src/components/User/Feedback.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { getTours, submitFeedback } from '../../services/tourService';\r\nimport { Container, Form, Button, Alert, Card, Row, Col, Spinner } from 'react-bootstrap';\r\n\r\nconst Feedback = () => {\r\n  const { user } = useAuth();\r\n  const [tours, setTours] = useState([]);\r\n  const [selectedTour, setSelectedTour] = useState('');\r\n  const [feedback, setFeedback] = useState({\r\n    rating: 5,\r\n    comment: ''\r\n  });\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchTours = async () => {\r\n      try {\r\n        const data = await getTours();\r\n        setTours(data);\r\n      } catch (err) {\r\n        setError('Failed to fetch tours. Please try again later.');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTours();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    \r\n    if (!selectedTour) {\r\n      setError('Please select a tour');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      await submitFeedback({\r\n        userId: user.id,\r\n        tourId: selectedTour,\r\n        ...feedback\r\n      });\r\n      setSubmitted(true);\r\n    } catch (err) {\r\n      setError('Failed to submit feedback. Please try again.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"text-center mt-5\">\r\n        <Spinner animation=\"border\" role=\"status\" style={{ color: '#3498db' }}>\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </Spinner>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (submitted) {\r\n    return (\r\n      <Container className=\"my-5 text-center\">\r\n        <Alert variant=\"success\">\r\n          <h4>Thank you for your feedback!</h4>\r\n          <p>We appreciate your time and valuable input.</p>\r\n        </Alert>\r\n        <Button variant=\"primary\" href=\"/\">Back to Home</Button>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"my-5\">\r\n      <h2 className=\"mb-4 text-center\" style={{ color: '#3498db' }}>Share Your Feedback</h2>\r\n      \r\n      <Row className=\"justify-content-center\">\r\n        <Col md={8}>\r\n          <Card className=\"shadow-sm\">\r\n            <Card.Body>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n              <Form onSubmit={handleSubmit}>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Select Tour</Form.Label>\r\n                  <Form.Select \r\n                    value={selectedTour}\r\n                    onChange={(e) => setSelectedTour(e.target.value)}\r\n                    required\r\n                  >\r\n                    <option value=\"\">Choose a tour...</option>\r\n                    {tours.map(tour => (\r\n                      <option key={tour.id} value={tour.id}>{tour.title}</option>\r\n                    ))}\r\n                  </Form.Select>\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Rating</Form.Label>\r\n                  <div>\r\n                    {[1, 2, 3, 4, 5].map(star => (\r\n                      <span \r\n                        key={star}\r\n                        style={{\r\n                          cursor: 'pointer',\r\n                          color: star <= feedback.rating ? '#e74c3c' : '#ccc',\r\n                          fontSize: '2rem'\r\n                        }}\r\n                        onClick={() => setFeedback({...feedback, rating: star})}\r\n                      >\r\n                        â˜…\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Comments</Form.Label>\r\n                  <Form.Control \r\n                    as=\"textarea\" \r\n                    rows={4}\r\n                    value={feedback.comment}\r\n                    onChange={(e) => setFeedback({...feedback, comment: e.target.value})}\r\n                  />\r\n                </Form.Group>\r\n                <Button variant=\"primary\" type=\"submit\">Submit Feedback</Button>\r\n              </Form>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Feedback;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}